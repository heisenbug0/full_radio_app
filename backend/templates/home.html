{% extends 'base.html' %}

{% block title %}Bellefu Radio - Listen Live{% endblock %}

{% block content %}
<h1>ðŸŽµ Bellefu Radio - Listen Live</h1>

<p>Your premier destination for agricultural radio programming. Listen to farming news, weather updates, market prices, and educational content from Nigeria and around the world.</p>

<!-- Current Show Widget -->
<div id="rjp-currentshow">
    <div class="element element-show-current" style="display: none;">
        <div class="wrapper">
            <h4 class="element-label"><i class="icon-microphone"></i> On air</h4>
            <div class="show">
                <div class="rjp-show-title-container">
                    <h4 class="rjp-show-title" id="show-title"></h4>
                    <h5 class="rjp-show-tagline" id="show-tagline"></h5>
                </div>
                <ul class="rjp-show-hosts" id="host-info"></ul>
            </div>
        </div>
    </div>
</div>

<!-- Radiojar Player - Main Feature -->
<div class="radiojar-player">
    <h3>ðŸ”´ Live Radio Stream</h3>
    
    <!-- Radiojar Player Widget -->
    <div id="rj-player">
        <div class="player-v3 player-medium">
            <div id="rj-cover">
                <a href="#"><img src=""/></a>
            </div>
            <div class="info">
                <div class="rjp-trackinfo-container">
                    <h4 class="rjp-label">Now playing:</h4>
                    <p id="trackInfo" class="rjp-info"></p>
                </div>
                <div class="rjp-player-container">
                    <div id="rjp-radiojar-player"></div>
                    <div id="rj-player-controls" class="rj-player-controls">
                        <div class="jp-gui jp-interface">
                            <div class="jp-controls">
                                <a href="javascript:;" style="display:block" class="jp-play" title="Play">&nbsp;<i class="icon-play"></i></a>
                                <a href="javascript:;" style="display:none" class="jp-pause" title="Pause"><i class="icon-pause"></i></a>
                                <a href="javascript:;" style="display:block" class="jp-mute" title="Mute"><i class="icon-volume-up"></i></a>
                                <a href="javascript:;" style="display:none" class="jp-unmute" title="Unmute"><i class="icon-volume-off"></i></a>
                                <div class="jp-volume-bar-wrapper">
                                    <div class="jp-volume-bar">
                                        <div class="jp-volume-bar-value"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="jp-no-solution">
                        <span>Update Required</span>
                        To play the media you will need to either update your browser to a recent version or update your <a href="//get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    {% if bellefu_station %}
    <div style="margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 4px; font-size: 14px;">
        <p><strong>Station:</strong> {{ bellefu_station.name }} | <strong>Quality:</strong> {{ bellefu_station.get_quality_display }}</p>
    </div>
    {% endif %}
</div>

<!-- Station Information -->
{% if bellefu_station %}
<h2>About Bellefu Radio</h2>
<div class="card">
    <h3>{{ bellefu_station.name }}</h3>
    <p>{{ bellefu_station.description }}</p>
    <table style="margin: 15px 0;">
        <tr>
            <td><strong>Broadcasting from:</strong></td>
            <td>{{ bellefu_station.country }}</td>
        </tr>
        <tr>
            <td><strong>Language:</strong></td>
            <td>{{ bellefu_station.language }}</td>
        </tr>
        <tr>
            <td><strong>Stream Quality:</strong></td>
            <td>{{ bellefu_station.get_quality_display }}</td>
        </tr>
        <tr>
            <td><strong>Website:</strong></td>
            <td><a href="https://bellefu-radio-web-v2.onrender.com/" target="_blank">https://bellefu-radio-web-v2.onrender.com/</a></td>
        </tr>
    </table>
</div>
{% endif %}

<!-- Program Schedule Widget -->
<h2>ðŸ“… Programs & Schedule</h2>
<div class="card">
    <h3>Live Programs & Upcoming Shows</h3>
    
    <!-- Radiojar Schedule Widget -->
    <div id="rj-schedule">
        <div id="rj-tabs">
            <ul class="rj-nav rj-nav-tabs" id="radio_schedule">
                <li class="active"><a href="#monday" data-toggle="tab">Monday</a></li>
                <li><a href="#tuesday" data-toggle="tab">Tuesday</a></li>
                <li><a href="#wednesday" data-toggle="tab">Wednesday</a></li>
                <li><a href="#thursday" data-toggle="tab">Thursday</a></li>
                <li><a href="#friday" data-toggle="tab">Friday</a></li>
                <li><a href="#saturday" data-toggle="tab">Saturday</a></li>
                <li><a href="#sunday" data-toggle="tab">Sunday</a></li>
            </ul>
            <div class="rj-tab-content">
                <div class="tab-pane active" id="monday">
                    <ul class="itemlist schedule"></ul>
                </div>
                <div class="tab-pane" id="tuesday">
                    <ul class="itemlist schedule"></ul>
                </div>
                <div class="tab-pane" id="wednesday">
                    <ul class="itemlist schedule"></ul>
                </div>
                <div class="tab-pane" id="thursday">
                    <ul class="itemlist schedule"></ul>
                </div>
                <div class="tab-pane" id="friday">
                    <ul class="itemlist schedule"></ul>
                </div>
                <div class="tab-pane" id="saturday">
                    <ul class="itemlist schedule"></ul>
                </div>
                <div class="tab-pane" id="sunday">
                    <ul class="itemlist schedule"></ul>
                </div>
            </div>
        </div>

        <script id="schedule_list_item" type="text/html">
            <li class="item item-show item-small" data-id="<%= sch.utc_from %>" style="background-image: url(//www.radiojar.com<%= sch.show_photo %>?resize=cover_small)">
                <div class="item-hostdjs">
                    <span></span>
                    <a href="<%= sch.dj_url %>" class="item-dj" title="<%= sch.dj_nickname %>">
                        <% if (sch.dj_photo.indexOf('image')!=-1) { %>
                        <div class="content">
                            <img class="item-thumb" src="<%= sch.dj_photo %>" />
                        </div>
                        <% } %>
                    </a>
                </div>
                <div class="overlay">
                    <div class="content">
                        <div class="item-showinfo">
                            <a href="<%= sch.show_url %>">
                                <h4 class="item-name"><%= sch.show_title %></h4>
                                <h5 class="item-tagline"><%= sch.show_tagline %></h5>
                            </a>
                        </div>
                        <div class="item-schedule">
                            <i class="icon-time"></i>
                            <span class="localize-time" data-date='<%= sch.utc_from %>'></span> - <span class='localize-time' data-date='<%= sch.utc_to %>'></span>
                        </div>
                    </div>
                </div>
            </li>
        </script>
    </div>
</div>

<!-- DJs & Hosts -->
<h2>ðŸŽ¤ Our DJs & Hosts</h2>
<div class="card">
    <h3>Meet the Voices of Bellefu Radio</h3>
    
    <!-- Radiojar DJs Widget -->
    <div id="rj-djs-list"></div>
    <script id="lists-dj-item" type="text/html">
        <li class="rj-dj-item">
            <div class="content">
                <img class="item-thumb" src="//www.radiojar.com/content/users/<%=dj.id%>/image/" />
                <h4 class="item-nickname"><%= dj.basic_info.first_name %> <%= dj.basic_info.last_name %></h4>
                <h5 class="item-name"><%= dj.dj_info.nickname %></h5>
            </div>
        </li>
    </script>
</div>

<!-- Show Recordings & Archive -->
<h2>ðŸŽ§ Show Recordings & Archive</h2>
<div class="card">
    <h3>Recent Shows & On-Demand Content</h3>
    
    <!-- Featured Show Profile Widget -->
    <div id="rjp-show"></div>
    <script id="rjp-show-templ" type="text/html">
        <div class="item-show" data-id="<%= show.utc_from %>" style="background-image: url(//www.radiojar.com/content/shows/<%= show.key %>/cover/?resize=cover_small)">
            <div class="item-status">
                <% if(typeof show.schedules!='undefined') { %>
                <% if( RJP.findNextEventofSchedules(show.schedules)!=null) { %>
                    <% if(RJP.isNow(show)) { %>
                        <span class="item-onair">On air now</span>
                    <% } %>
                <% } %>
                <% } %>
            </div>
            <div class="item-hostdjs">
                <% for (var i=0;i<show.host_profiles.length;i++){ %>
                  <a class="item-dj" title="<%= show.host_profiles[i].dj_info.nickname %>">
                     <div class="content">
                        <img class="item-thumb" src="//www.radiojar.com<%= show.host_profiles[i].dj_info.image_url %>" />
                     </div>
                </a>
                <% } %>
            </div>
           <div class="overlay">
               <div class="content">
                <% if(show.schedule){ %>
                   <div class="item-hoststation">
                       <a class="item-station preventDefault" >
                        	<img class="item-thumb" src="//www.radiojar.com/content/stations/<%= show.schedule.station %>/image/?resize=60x60">
                     </a>
                    </div>
                <% } %>
                       <a class="item-showinfo">
                        <h4 class="item-name"><%= show.title %></h4>
                        <h5 class="item-tagline"><%= show.tagline %></h5>
                      <% if(show.schedule){ %>
                         	<span class="item-schedule">
                        	   <span class="item-label"><%= RJP.formatScheduledText(show.schedule) %></span>
                    		</span>
                      <% } %>
            	   </a>
                 </div>
             </div>
        </div>
    </script>
</div>

<!-- Live Chat -->
<h2>ðŸ’¬ Live Chat</h2>
<div class="card">
    <h3>ðŸ’¬ Join the Conversation</h3>
    
    <!-- Radiojar Chat Widget -->
    <div id="rjp-chat"></div>
    
    <p style="margin-top: 15px; font-size: 14px; color: #666;">
        <strong>ðŸ’¬ Join the conversation!</strong> Chat with other listeners and interact with our DJs during live shows.
    </p>
</div>

<!-- Optional User Features -->
{% if not user.is_authenticated %}
<div class="optional-feature">
    <h3>ðŸ“ˆ Create Your Account (Optional)</h3>
    <p>Want to personalize your experience? Create a free account to manage your profile and preferences!</p>
    <p style="margin-top: 10px;">
        <a href="{% url 'register' %}" style="display: inline-block; padding: 8px 16px; background: #000; color: white; text-decoration: none; border-radius: 4px; margin-right: 10px;">Create Free Account</a>
        <a href="{% url 'login' %}" style="display: inline-block; padding: 8px 16px; border: 1px solid #000; color: #000; text-decoration: none; border-radius: 4px;">Login</a>
    </p>
    <p style="margin-top: 10px; font-size: 12px; color: #666;">
        <strong>Note:</strong> Account creation is completely optional. You can listen to the radio without signing up!
    </p>
</div>
{% else %}
<div class="optional-feature">
    <h3>ðŸ‘‹ Welcome back, {{ user.get_full_name|default:user.username }}!</h3>
    <p>Manage your account settings and preferences in your dashboard.</p>
    <p style="margin-top: 10px;">
        <a href="{% url 'dashboard' %}" style="display: inline-block; padding: 8px 16px; background: #000; color: white; text-decoration: none; border-radius: 4px;">View Your Dashboard</a>
    </p>
</div>
{% endif %}

{% endblock %}